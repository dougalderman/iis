<h2>Create / Modify Quiz Template</h2>

<form [formGroup]="createModifyQuizTemplateForm" (ngSubmit)="saveTemplate()">
  <select id="template" formControlName="templateSelect">
    <option value="" disabled selected>Select Template</option>
    <option *ngFor="let templ of templates" [ngValue]="templ.id">{{templ.name}}</option>
  </select>
  <br>
  <label>Name:</label>
  <input type="text" id="name" formControlName="name" required>
  <div *ngIf="name.invalid && (name.dirty || name.touched)">
    <div *ngIf="name.errors.required" style="color: red">Template name is required</div>
  </div>
  <br>
  <label>Description:</label>
  <input type="text" id="text" formControlName="description">
  <br><br>
  <div formArrayName="formQuestions">
    <div *ngFor="let question of createModifyQuizTemplateForm.get('formQuestions').controls; let i=index">
      <div [formGroupName]="i">
        <label>Question Text:</label>
        <input type="text" formControlName="text">
        <div *ngIf="question.controls.text.invalid && (question.controls.text.dirty || question.controls.text.touched)">
          <div *ngIf="question.controls.text.errors.required" style="color: red">Question text is required</div>
        </div>
        <br>
        <label>Question Type:</label>
        <input type="text" formControlName="type">
        <div *ngIf="question.controls.type.invalid && (question.controls.type.dirty || question.controls.type.touched)">
            <div *ngIf="question.controls.type.errors.required" style="color: red">Question type is required</div>
          </div>
        <br>
        <label>Answer:</label>
        <input type="text" formControlName="answer">
        <div *ngIf="question.controls.answer.invalid && (question.controls.answer.dirty || question.controls.answer.touched)">
            <div *ngIf="question.controls.answer.errors.required" style="color: red">Question answer is required</div>
          </div>
        <br>
        <button type="button" *ngIf="createModifyQuizTemplateForm.get('formQuestions').controls.length > 1" (click)="deleteQuestion(i)">Delete Question</button>
        <br><br>
      </div>
    </div>
  </div>
  <button type="button" (click)="addQuestion()">Add New Question</button>
  <br>
  <button type="submit" [disabled]="!createModifyQuizTemplateForm.valid">Save</button>
  <div *ngIf="success" style="color: green">Template successfully saved</div>
 </form>
